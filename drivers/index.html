
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Bash Task Master Documentation">
      
      
        <meta name="author" content="Stephen Walker">
      
      
        <link rel="canonical" href="https://bash-task-master.readthedocs.io/drivers/">
      
      
        <link rel="prev" href="../modules/">
      
      
        <link rel="next" href="../repositories/">
      
      <link rel="icon" href="../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Drivers - Bash Task Master</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#drivers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Bash Task Master" class="md-header__button md-logo" aria-label="Bash Task Master" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 5v14h2v2H3V3h4v2H5m15 2H7v2h13V7m0 4H7v2h13v-2m0 4H7v2h13v-2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Bash Task Master
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Drivers
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hppr-dev/bash-task-master" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg>
  </div>
  <div class="md-source__repository">
    hppr-dev/bash-task-master
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../walkthrough/" class="md-tabs__link">
      Walkthrough
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../built_in_tasks/" class="md-tabs__link">
      Built In Tasks
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../task_files/" class="md-tabs__link">
      Task Files
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../state/" class="md-tabs__link">
      State
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../modules/" class="md-tabs__link">
      Modules
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Drivers
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../repositories/" class="md-tabs__link">
      Repositories
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Bash Task Master" class="md-nav__button md-logo" aria-label="Bash Task Master" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 5v14h2v2H3V3h4v2H5m15 2H7v2h13V7m0 4H7v2h13v-2m0 4H7v2h13v-2Z"/></svg>

    </a>
    Bash Task Master
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hppr-dev/bash-task-master" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.6 10.59 8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2 2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2 2 2 0 0 0 2-2 2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82Z"/></svg>
  </div>
  <div class="md-source__repository">
    hppr-dev/bash-task-master
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../walkthrough/" class="md-nav__link">
        Walkthrough
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../built_in_tasks/" class="md-nav__link">
        Built In Tasks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../task_files/" class="md-nav__link">
        Task Files
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../state/" class="md-nav__link">
        State
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Drivers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Drivers
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bash-driver" class="md-nav__link">
    Bash Driver
  </a>
  
    <nav class="md-nav" aria-label="Bash Driver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tasks" class="md-nav__link">
    Tasks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    Arguments
  </a>
  
    <nav class="md-nav" aria-label="Arguments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifying-arguments" class="md-nav__link">
    Specifying Arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arguments-example" class="md-nav__link">
    Arguments Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#supported-argument-types" class="md-nav__link">
    Supported Argument Types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-drivers" class="md-nav__link">
    Custom Drivers
  </a>
  
    <nav class="md-nav" aria-label="Custom Drivers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-a-custom-driver" class="md-nav__link">
    Installing a Custom Driver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../repositories/" class="md-nav__link">
        Repositories
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="drivers">Drivers<a class="headerlink" href="#drivers" title="Permanent link">&para;</a></h1>
<p>Drivers are resposible for executing, listing and providing help for tasks.
The driver defines the format and filename for a task file.
By default, the only driver included in Bash Task Master is the bash driver.
Built-in tasks and modules use the bash driver.</p>
<p>See <a href="#custom-drivers">below</a> on how to implement a driver to support different file formats.</p>
<p>Drivers are managed by the built-in <a href="/built_in_tasks#driver">driver</a> module.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Disabling a driver is non destructive.
Driver files remain in place but the filename association is temporarily removed.
This is so that if you want to re-enable a driver, it does not redownload the assets.</p>
</div>
<h2 id="bash-driver">Bash Driver<a class="headerlink" href="#bash-driver" title="Permanent link">&para;</a></h2>
<p>The bash driver is used whenever a task file is named tasks.sh or .tasks.sh.
As the name implies, it is implemented in bash and the task file is a bash script.
Arguments and tasks are defined in bash functions which are loaded by the main task function.</p>
<h3 id="tasks">Tasks<a class="headerlink" href="#tasks" title="Permanent link">&para;</a></h3>
<p>Tasks in a bash task file are created as functions with the <code>task_</code> prefix in the tasks.sh file.
Anything after <code>task_</code> is treated as the task name:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Example tasks.sh file</span>

<span class="c1"># run with task clean</span>
task_clean<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>...
<span class="o">}</span>

<span class="c1"># run with task check_all</span>
task_check_all<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>...
<span class="o">}</span>
</code></pre></div>
<h3 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permanent link">&para;</a></h3>
<p>Each argument given to a task is loaded into the task as an <code>ARG_</code> variable.
By default, any long argument, i.e. one that starts with a <code>--</code>, is loaded with the same name as it was given on the command line.
For example, running <code>task hello --foo bar</code> would run the <code>task_hello</code> function with <code>ARG_FOO=bar</code>.</p>
<h4 id="specifying-arguments">Specifying Arguments<a class="headerlink" href="#specifying-arguments" title="Permanent link">&para;</a></h4>
<p>Arguments can be defined in an <code>arguments_TASKNAME</code> function.
This function should be loaded alongside the task definition, i.e. inside the same tasks.sh file.
The variables inside this function are used to parse and validate the arguments before the task function is run.</p>
<p>The following variables are supported in arguments functions:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SUBCOMMANDS</code></td>
<td>a <code>|</code> delimited list of subcommands.</td>
<td><code>SUBCOMMANDS="sign|clean|init"</code></td>
</tr>
<tr>
<td><code>[COMMAND]_DESCRIPTION</code></td>
<td>help string for a COMMAND or SUBCOMMAND</td>
<td><code>BUILD_DESCRIPTION="Build the project"</code></td>
</tr>
<tr>
<td><code>[COMMAND]_REQUIREMENTS</code></td>
<td>required arguments for a COMMAND or SUBCOMMAND.</td>
<td><code>INIT_REQUIREMENTS="out:o:str dir:d:str"</code></td>
</tr>
<tr>
<td><code>[COMMAND]_OPTIONS</code></td>
<td>arguments for a COMMAND or SUBCOMMAND</td>
<td><code>CLEAN_OPTIONS="f:force:bool"</code></td>
</tr>
</tbody>
</table>
<p>Note that DESCRIPTION, REQUIREMENTS and OPTIONS can be used with a command AND/OR a subcommand.</p>
<p>REQUIREMENTS and OPTIONS are written as lists of space delimited argument specifications that are of the form: long-arg:short-arg:arg-type.</p>
<p>The long-arg of the argument specifies the flag to be used with <code>--</code> and also denotes the portion of the <code>ARG_</code> variable in the tasks.
The short-arg is the flag to be used with <code>-</code> (single dash).
The arg-type specifies what type the argument is. See <a href="#supported-argument-types">below</a> for available types.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><img alt="Arguments Reference" src="../assets/args-ref.png" /></p>
</div>
<p>The above specification specifies that the compose command has 3 optional arguments: <code>--name</code> or <code>-n</code>, <code>--host</code> or <code>-h</code>, <code>--iterations</code> or <code>-i</code>.
In the task we could access these values as <code>ARG_NAME</code>, <code>ARG_HOST</code> and <code>ARG_ITERATIONS</code> respectively.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All dashes (<code>-</code>) in subcommands and arguments are converted to underscores (<code>_</code>).
i.e. <code>task thing --my-way 100</code> would have <code>ARG_MY_WAY=100</code>.  </p>
</div>
<h4 id="arguments-example">Arguments Example<a class="headerlink" href="#arguments-example" title="Permanent link">&para;</a></h4>
<p>If the following arguments are defined for the build task:</p>
<div class="highlight"><pre><span></span><code>arguments_build<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nv">SUBCOMMANDS</span><span class="o">=</span><span class="s2">&quot;help|frontend|backend|all&quot;</span>
<span class="w">  </span><span class="nv">FRONTEND_REQUIREMENTS</span><span class="o">=</span><span class="s2">&quot;out:o:str in:i:str&quot;</span>
<span class="w">  </span><span class="nv">FRONTEND_OPTIONS</span><span class="o">=</span><span class="s2">&quot;verbose:v:bool lint:L:bool dir:d:str&quot;</span>
<span class="w">  </span><span class="nv">BACKEND_REQUIREMENTS</span><span class="o">=</span><span class="s2">&quot;pid:P:int&quot;</span>
<span class="w">  </span><span class="nv">BACKEND_OPTIONS</span><span class="o">=</span><span class="s2">&quot;verbose:v:bool build-first:B:bool&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>Then all of the following calls would succeed:</p>
<div class="highlight"><pre><span></span><code>task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w"> </span>--out<span class="w"> </span>outdir<span class="w"> </span>--in<span class="w"> </span>infile
task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w"> </span>--out<span class="w"> </span>outdir<span class="w"> </span>--in<span class="w"> </span>infile<span class="w"> </span>--lint<span class="w"> </span>--verbose
task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w"> </span>-o<span class="w"> </span>outdir<span class="w"> </span>-i<span class="w"> </span>infile<span class="w"> </span>-L<span class="w"> </span>-v
task<span class="w"> </span>build<span class="w"> </span>all
task<span class="w"> </span>build<span class="w"> </span>backend<span class="w"> </span>--pid<span class="w"> </span><span class="m">123</span>
task<span class="w"> </span>build<span class="w"> </span>backend<span class="w"> </span>-P<span class="w"> </span><span class="m">123</span>
task<span class="w"> </span>build<span class="w"> </span>backend<span class="w"> </span>-vBP<span class="w"> </span><span class="m">123</span>
task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w"> </span>-Lo<span class="w"> </span>outdir<span class="w"> </span>-vi<span class="w"> </span>infile
</code></pre></div>
<p>But none of the following:</p>
<div class="highlight"><pre><span></span><code>task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w">                              </span><span class="c1"># Missing required arguments</span>
task<span class="w"> </span>build<span class="w"> </span>frontend<span class="w"> </span>--in<span class="w"> </span>infile<span class="w"> </span>--lint<span class="w"> </span>--verbose<span class="w"> </span><span class="c1"># Unknown argument --in</span>
task<span class="w"> </span>build<span class="w"> </span>backend<span class="w"> </span>-P<span class="w"> </span><span class="m">12</span><span class="w"> </span>-v<span class="w"> </span>garbage<span class="w">              </span><span class="c1"># Verbose is not a bool</span>
</code></pre></div>
<h4 id="supported-argument-types">Supported Argument Types<a class="headerlink" href="#supported-argument-types" title="Permanent link">&para;</a></h4>
<p>Available types are as follows:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Identifier</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>str</td>
<td>A string of characters, can pretty much be anything.</td>
</tr>
<tr>
<td>Integer</td>
<td>int</td>
<td>An integer</td>
</tr>
<tr>
<td>Boolean</td>
<td>bool</td>
<td>An argument that is either T if present or an empty string if not*</td>
</tr>
<tr>
<td>Word</td>
<td>nowhite</td>
<td>A string with no whitespaces</td>
</tr>
<tr>
<td>Uppercase</td>
<td>upper</td>
<td>An uppercase string</td>
</tr>
<tr>
<td>Lowercase</td>
<td>lower</td>
<td>A lowercase string</td>
</tr>
<tr>
<td>Single Char</td>
<td>single</td>
<td>A single character*</td>
</tr>
</tbody>
</table>
<p>All types, except for bool, require that a value is given.
With bool arguments, the argument being present automatically sets the <code>ARG_VAR</code>.
Note that short arguments can be combined to one combined argument, e.g -vBP, but only the last can be a non bool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A single character may be confused as a boolean at validation time.
If a value for a single character argument is left out, it will be set to "1"</p>
</div>
<h2 id="custom-drivers">Custom Drivers<a class="headerlink" href="#custom-drivers" title="Permanent link">&para;</a></h2>
<p>Task drivers are determined by the filename of the task file.
The tasks.sh and .task.sh filenames are associated with the bash_driver.
A custom driver needs to have a unique name for it's task file.</p>
<p>The way that the task runner switches between drivers is by loading different sets of functions for executing, listing and providing help on tasks.</p>
<p>The following variables indicate what command or function to run when processing a task file.</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DRIVER_EXECUTE_TASK</td>
<td>$@</td>
<td>Executes a task. Gets passed all of the arguments to the task function.</td>
</tr>
<tr>
<td>DRIVER_HELP_TASK</td>
<td>TASK_COMMAND</td>
<td>Shows the help for the given command.</td>
</tr>
<tr>
<td>DRIVER_LIST_TASKS</td>
<td>TASKS_FILE</td>
<td>Lists the available tasks in the given task file. Outputs a space or newline separated list of tasks. The list is used to verify that the task is defined.</td>
</tr>
<tr>
<td>DRIVER_VALIDATE_TASK_FILE</td>
<td>TASKS_FILE</td>
<td>Validates a that the given task file is readable by the driver.</td>
</tr>
</tbody>
</table>
<p>Different languages may be used to implement custom drivers but the driver must define these variables to interface with the execution environment.</p>
<p>The following driver file would define an alternative bash driver that doesn't do anything with arguments and just executes hello, world, foo and bar tasks:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DRIVER_EXECUTE_TASK</span><span class="o">=</span>execute_task
<span class="nv">DRIVER_HELP_TASK</span><span class="o">=</span>not_helpful
<span class="nv">DRIVER_LIST_TASKS</span><span class="o">=</span>acceptable_tasks
<span class="nv">DRIVER_VALIDATE_TASK_FILE</span><span class="o">=</span>noop

noop<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="o">}</span>

execute_task<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>task_<span class="nv">$1</span>
<span class="o">}</span>

not_helpful<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>rtfd
<span class="o">}</span>

acceptable_tasks<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello world foo bar&quot;</span>
<span class="o">}</span>
</code></pre></div>
<h3 id="installing-a-custom-driver">Installing a Custom Driver<a class="headerlink" href="#installing-a-custom-driver" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step only applies to drivers outside of repositories.
It is handled automatically when running <code>task driver enable</code>,
See <a href="/repositories#repository-drivers">repositories</a> for more information.</p>
</div>
<p>After the source for a driver is added to the <code>$TASK_MASTER_HOME/lib/drivers/</code> directory, the <code>$TASK_MASTER_HOME/lib/drivers/installed_drivers.sh</code> file must be updated with the filename that should be associated with the driver.</p>
<p>For example, to install the pydriver driver to process task files named .tasks.py, add the following to the <code>installed_drivers.sh</code> file:</p>
<div class="highlight"><pre><span></span><code>TASK_FILE_NAME_DICT<span class="o">[</span>.tasks.py<span class="o">]=</span>pydriver
TASK_DRIVER_DICT<span class="o">[</span>pydriver<span class="o">]=</span>pydriver.sh
</code></pre></div>
<p>where <code>my_driver.sh</code> is the filename of the driver in the <code>$TASK_MASTER_HOME/lib/drivers/</code> directory.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; hppr.dev

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/hppr-dev/bash-task-master" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.integrate", "content.code.copy"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.407015b8.min.js"></script>
      
    
  </body>
</html>